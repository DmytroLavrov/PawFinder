<div class="details-container">
  <button class="back-btn" (click)="onBack()">
    <span class="arrow">‚Üê</span>
    Back to list
  </button>

  @if (isLoading()) {
    <app-loader />

  } @else if (error()) {
    <app-error-message [message]="error()!" (retry)="onRetry()" />

  } @else if (dog(); as dogData) {
    <div class="details-content">
      <div class="image-section">
        <img [src]="dogData.url" [alt]="dogData.breeds?.[0]?.name || 'Dog'" class="dog-image" />

        <button
          class="floating-favorite-btn"
          [class.active]="isFavorite()"
          (click)="onToggleFavorite()"
          [attr.aria-label]="isFavorite() ? 'Remove from favorites' : 'Add to favorites'"
        >
          <span class="heart-icon">
            {{ isFavorite() ? '‚ù§Ô∏è' : '‚ô°' }}
          </span>
        </button>
      </div>

      <div class="info-section">
        <h1 class="breed-name">
          {{ dogData.breeds?.[0]?.name || 'Mixed Breed' }}
        </h1>

        @if (dogData.breeds?.[0]; as breed) {
          @if (breed.bred_for) {
            <div class="info-card">
              <h3 class="info-label">Bred For</h3>
              <p class="info-value">{{ breed.bred_for }}</p>
            </div>
          }

          @if (breed.breed_group) {
            <div class="info-card">
              <h3 class="info-label">Breed Group</h3>
              <p class="info-value">{{ breed.breed_group }}</p>
            </div>
          }

          @if (breed.temperament) {
            <div class="info-card">
              <h3 class="info-label">Temperament</h3>
              <p class="info-value">{{ breed.temperament }}</p>
            </div>
          }

          <div class="info-card">
            <h3 class="info-label">Life Span</h3>
            <p class="info-value">üïê {{ breed.life_span }}</p>
          </div>

          <div class="measurements">
            <div class="measurement-card">
              <h3 class="info-label">Weight</h3>
              <p class="info-value">{{ breed.weight.metric }} kg</p>
              <p class="info-secondary">{{ breed.weight.imperial }} lbs</p>
            </div>

            <div class="measurement-card">
              <h3 class="info-label">Height</h3>
              <p class="info-value">{{ breed.height.metric }} cm</p>
              <p class="info-secondary">{{ breed.height.imperial }} inches</p>
            </div>
          </div>
        }

        <div class="actions">
          <button
            class="btn btn-primary"
            [class.btn-remove]="isFavorite()"
            (click)="onToggleFavorite()"
          >
            <span class="btn-icon">{{ isFavorite() ? 'üíî' : '‚ù§Ô∏è' }}</span>
            {{ isFavorite() ? 'Remove from Favorites' : 'Add to Favorites' }}
          </button>

          <button class="btn btn-secondary" (click)="onBack()">Browse More Dogs</button>
        </div>
      </div>
    </div>
  }
</div>
